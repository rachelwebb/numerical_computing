%------------------------------------------------------------------------------%
% command.tex                                                                  %
% This file contains the various environments and other misc. commands         %
%------------------------------------------------------------------------------%

%%%%%%%%%%%%%%%%%%%%%
% Document settings
%%%%%%%%%%%%%%%%%%%%%
%set lengths that are pleasing for screen display.
\setlength{\paperheight}{11in}
\setlength{\paperwidth}{8.5in}

%set paragraph skips and line spacing
\linespread{1.05}
\setlength{\parskip} {2pt plus1pt minus1pt}

\makeatletter
%Make all floats centered
\g@addto@macro\@floatboxreset\centering
% Reset footnote counter every chapter
\@addtoreset{footnote}{chapter}
\makeatother

\floatstyle{ruled}
\restylefloat{algorithm}

\makeatletter
\Hy@AtBeginDocument{
    \def\@pdfborder{0 0 1}
    \def\@pdfborderstyle{/S/U/W 1}
}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%
%Bibliography settings
%%%%%%%%%%%%%%%%%%%%%%%%
\addbibresource{references.bib}
\renewcommand{\bibname}{References}

%%%%%%%%%%%%%%%%%
% Lab Commands
%%%%%%%%%%%%%%%%%
\renewcommand{\chaptername}{Lab}
\newcommand{\lab}[3]{\chapter[#3]{#1: #2}}
\newcommand{\objective}[1]{{\bf Lab Objective: } \emph{#1} \bigskip}

%% Full line comments in the Algorithmic environment.
\algnewcommand{\LineComment}[1]{\State \(\triangleright\) #1}

%%%%%%%%%%%%%%%%%%%%%%%%%
% Misc. Environments
%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{problemnum}[chapter]
\newenvironment{problem}{\begin{mdframed}[style=problem]\begin{problemnum}}{\end{problemnum}\end{mdframed}}
\newtheoremup{problemnum}{Problem}

%%%%%%%%%%%%%%%%%%%%%%%
% Colors
%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{shadecolor}{RGB}{186, 207, 188}
\definecolor{warning}{RGB}{255, 188, 163}
\definecolor{warnline}{RGB}{255, 15, 15}
\definecolor{information}{RGB}{235, 255, 223}
\definecolor{infoline}{RGB}{69, 163, 11}
\definecolor{codebase}{RGB}{250, 245, 182}
\definecolor{codekeyword}{RGB}{42, 161, 152}
\definecolor{codecomment}{RGB}{108, 153, 8}
\definecolor{codestring}{RGB}{203, 75, 22}

%%%%%%%%%%%%%%%%%%%%%%%
% Frame environments
%%%%%%%%%%%%%%%%%%%%%%%
\mdfdefinestyle{problem}{backgroundcolor=shadecolor,
                         hidealllines=true,
                         skipabove=10pt,
                         skipbelow=10pt,
                         innertopmargin=15pt,
                         innerbottommargin=15pt,
                         innerleftmargin=15pt,
                         innerrightmargin=15pt}

\newmdenv[
  roundcorner=10pt,
  skipabove=10pt
  skipbelow=10pt
  leftmargin=20pt,
  rightmargin=20pt,
  backgroundcolor=warning,
  innertopmargin=10pt,
  innerbottommargin=10pt,
  innerleftmargin=10pt,
  middlelinewidth=0pt,
  everyline=true,
  linecolor=warnline,
  linewidth=1pt,
  font=\normalfont\normalsize,
  frametitlefont=\large\bfseries,
  frametitleaboveskip=1em,
  frametitlerule=true,
  frametitle={\sc Warning}
]{warn}


\newmdenv[
  roundcorner=10pt,
  skipabove=10pt
  skipbelow=10pt
  leftmargin=20pt,
  rightmargin=20pt,
  backgroundcolor=information,
  outerlinewidth=1,
  outerlinecolor=infoline,
  innertopmargin=10pt,
  innerbottommargin=10pt,
  innerleftmargin=10pt,
  middlelinewidth=0pt,
  everyline=true,
  linecolor=infoline,
  linewidth=1pt,
  font=\normalfont\normalsize,
  frametitlefont=\large\bfseries,
  frametitleaboveskip=1em,
  frametitlerule=true,
  frametitle={\sc Note}
]{info}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Listings Environments
%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Default Environment
\lstset{
        language=Python,
        backgroundcolor=\color[RGB]{250, 245, 182},
        tabsize=4,
        basewidth=.5em,
        rulecolor=,
        basicstyle=\footnotesize\ttfamily,
        upquote=true,
        columns=fixed,
        extendedchars=true,
        breaklines=true,
        prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
        frame=lrtb,
        xleftmargin=5pt,
        framesep=4pt,
        framerule=.1pt,
        showtabs=false,
        showspaces=false,
        showstringspaces=false,
        keywordstyle=\color[RGB]{42, 161, 152},
        commentstyle=\color[RGB]{108, 153, 8},
        stringstyle=\color[RGB]{189, 78, 98},
        title=\lstname,
        captionpos=b,
        abovecaptionskip=-5pt,
        belowcaptionskip=-5pt
}

% \surroundwithmdframed[
%         hidealllines=true,
%         backgroundcolor=codebase,
%         innerleftmargin=-5pt,
%         innertopmargin=-1pt,
%         innerrightmargin=0pt,
%         innerbottommargin=-5pt]{lstlisting}

% Including source code from a file on disk
\lstdefinestyle{FromFile}{language=Python,
                          frame=single,
                          numbers=left,
                          numberstyle=\tiny,
                          stepnumber=2,
                          numbersep=7pt,
                          numberfirstline=true,
                          abovecaptionskip=2pt,
                          belowcaptionskip=2pt}

% Shell I/O.  Avoids syntax highlighting
\lstdefinestyle{ShellOutput}{language=}
\lstdefinestyle{ShellInput}{language=}

% Deprecated Environments (Replaced by Algorithmic package)
\lstdefinestyle{pseudo}{basicstyle=\rmfamily,
                        upquote=true,
                        keywordstyle=\color{black}\bfseries,
                        commentstyle=\color[rgb]{0.133,0.545,0.133},
                        stringstyle=\color[rgb]{0.627,0.126,0.941},}

\newcommand{\pseudoli}[1]{\lstinline[style=pseudo]!#1!}
\newcommand{\li}[1]{\lstinline[prebreak=]!#1!}


%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Special Math Characters
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\0{{\bf 0}}
\def\a{{\bf a}}
\def\b{{\bf b}}
\def\e{{\bf e}}
\def\f{{\bf f}}
\def\g{{\bf g}}
\def\p{{\bf p}}
\def\q{{\bf q}}
\def\u{{\bf u}}
\def\v{{\bf v}}
\def\w{{\bf w}}
\def\x{{\bf x}}
\def\y{{\bf y}}
\def\z{{\bf z}}
\def\subspace{\lhd}

\def\CalL{\mathcal{L}}
\def\CalO{\mathcal{O}}
\def\CalV{\mathcal{V}}
\def\CalU{\mathcal{U}}
\def\bU{{\bar{u}}}
\def\R{\Re e}
\def\I{\Im m}
\def\M{M_n}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Various commands that make life easier
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\argmax}{\mbox{argmax}}
\newcommand{\indicator}[1]{\mathbbm{1}_{\left[#1\right] }}
\providecommand{\abs}[1]{\left\lvert#1\right\rvert}
\providecommand{\norm}[1]{\left\lVert#1\right\rVert}
\providecommand{\set}[1]{\lbrace#1\rbrace}
\providecommand{\setconstruct}[2]{\lbrace#1:#2\rbrace}
\providecommand{\Res}[1]{\underset{#1}{Res}}           % Residue

\newcommand{\ipt}[2]{\langle #1,#2 \rangle}
\newcommand{\ip}{\int_{-\infty}^{+\infty}}

\renewcommand{\ker}[1]{\mathcal{N}(#1)}
\newcommand{\ran}[1]{\mathcal{R}(#1)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math Operators
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator{\sign}{sign}
